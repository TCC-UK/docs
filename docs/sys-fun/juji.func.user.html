<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>juji.func.user documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Juji Built-in Functions</span> <span class="project-version">1.5.28</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><a href="juji.func.nlp.html"><div class="inner"><span>juji.func.nlp</span></div></a></li><li class="depth-1"><a href="juji.func.system.html"><div class="inner"><span>juji.func.system</span></div></a></li><li class="depth-1 current"><a href="juji.func.user.html"><div class="inner"><span>juji.func.user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="juji.func.user.html#var-current-num-words-by-user"><div class="inner"><span>current-num-words-by-user</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-first-time-chat.3F"><div class="inner"><span>first-time-chat?</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-agreeableness-score"><div class="inner"><span>get-agreeableness-score</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-conscientiousness-score"><div class="inner"><span>get-conscientiousness-score</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-extroversion-score"><div class="inner"><span>get-extroversion-score</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-neuroticism-score"><div class="inner"><span>get-neuroticism-score</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-new-readerdna-from-text-embedding"><div class="inner"><span>get-new-readerdna-from-text-embedding</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-openness-score"><div class="inner"><span>get-openness-score</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-recommended-books"><div class="inner"><span>get-recommended-books</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-top-k-traits"><div class="inner"><span>get-top-k-traits</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-top-three-personalities"><div class="inner"><span>get-top-three-personalities</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-top-trait"><div class="inner"><span>get-top-trait</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-trait-score-by-name"><div class="inner"><span>get-trait-score-by-name</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-get-user-attribute-as-string"><div class="inner"><span>get-user-attribute-as-string</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-personality-bar-chart"><div class="inner"><span>personality-bar-chart</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-present-entertainment-dna"><div class="inner"><span>present-entertainment-dna</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-store-unanswered-user-question"><div class="inner"><span>store-unanswered-user-question</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-store-user-attribute"><div class="inner"><span>store-user-attribute</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-store-user-faq"><div class="inner"><span>store-user-faq</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-trait-score-value-by-name"><div class="inner"><span>trait-score-value-by-name</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-user-email"><div class="inner"><span>user-email</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-user-first-name"><div class="inner"><span>user-first-name</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-user-has-attribute.3F"><div class="inner"><span>user-has-attribute?</span></div></a></li><li class="depth-1"><a href="juji.func.user.html#var-visitor-seem-familiar.3F"><div class="inner"><span>visitor-seem-familiar?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">juji.func.user</h1><div class="doc"><div class="markdown"><p>User related built-in functions</p></div></div><div class="public anchor" id="var-current-num-words-by-user"><h3>current-num-words-by-user</h3><div class="usage"><code>(current-num-words-by-user rep)</code></div><div class="doc"><div class="markdown"><p>Return total number of words the user has typed in Juji so far.</p></div></div></div><div class="public anchor" id="var-first-time-chat.3F"><h3>first-time-chat?</h3><div class="usage"><code>(first-time-chat? rep)</code></div><div class="doc"><div class="markdown"><p>If the current user is from facebook messenger, check if this is his/her first time chatting with current engagement on the facebook page using her/her psid as identifier. If the current user is from web chat, check if this is his/her first time chatting with the current engagement using his/her email as identifier.</p></div></div></div><div class="public anchor" id="var-get-agreeableness-score"><h3>get-agreeableness-score</h3><div class="usage"><code>(get-agreeableness-score rep)</code></div><div class="doc"><div class="markdown"><p>Return the user’s agreeableness score (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-get-conscientiousness-score"><h3>get-conscientiousness-score</h3><div class="usage"><code>(get-conscientiousness-score rep)</code></div><div class="doc"><div class="markdown"><p>Return the user’s conscientiousness score (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-get-extroversion-score"><h3>get-extroversion-score</h3><div class="usage"><code>(get-extroversion-score rep)</code></div><div class="doc"><div class="markdown"><p>Return the user’s extroversion score (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-get-neuroticism-score"><h3>get-neuroticism-score</h3><div class="usage"><code>(get-neuroticism-score rep)</code></div><div class="doc"><div class="markdown"><p>Return the user’s neuroticism score (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-get-new-readerdna-from-text-embedding"><h3>get-new-readerdna-from-text-embedding</h3><div class="usage"><code>(get-new-readerdna-from-text-embedding rep)</code><code>(get-new-readerdna-from-text-embedding rep k)</code></div><div class="doc"><div class="markdown"><p>Rank user’s readerdna queried from his/her input text analytsis. Return the top <code>k</code> ranking readerdna info.</p>
<p>If <code>k</code> is not provided, return the top one.</p></div></div></div><div class="public anchor" id="var-get-openness-score"><h3>get-openness-score</h3><div class="usage"><code>(get-openness-score rep)</code></div><div class="doc"><div class="markdown"><p>Return the user’s openness score (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-get-recommended-books"><h3>get-recommended-books</h3><div class="usage"><code>(get-recommended-books rep)</code><code>(get-recommended-books rep {:keys [fav-genre-text last-genre-text age-group gender]})</code></div><div class="doc"><div class="markdown"><p>Perform book recommendation analysis. Return information on the top recommended book.</p></div></div></div><div class="public anchor" id="var-get-top-k-traits"><h3>get-top-k-traits</h3><div class="usage"><code>(get-top-k-traits rep aspect k)</code></div><div class="doc"><div class="markdown"><p>Get top k traits of the given <code>aspect</code> of the current user.</p>
<p><code>aspect</code> can be one of the following: “fooddna”, “consumerdna”, “styledna”, “gamerdna”, “persona”, “strength”, “weakness”, “big5”, “positive big5”, “entertainmentdna”.</p></div></div></div><div class="public anchor" id="var-get-top-three-personalities"><h3>get-top-three-personalities</h3><div class="usage"><code>(get-top-three-personalities rep)</code></div><div class="doc"><div class="markdown"><p>Return a string of three positive adjectives of the form “adj1, adj2 and adj3”. The adjectives describe the three highest ranking personalities from Juji’s personality analysis based on the user’s historical chat input. Return nil if the user has no existing chat data.</p></div></div></div><div class="public anchor" id="var-get-top-trait"><h3>get-top-trait</h3><div class="usage"><code>(get-top-trait rep dna-aspect)</code></div><div class="doc"><div class="markdown"><p>Get top trait of the given <code>aspect</code>. of the current user.</p>
<p><code>aspect</code> can be one of the following: “fooddna”, “consumerdna”, “styledna”, “gamerdna”, “persona”, “strength”, “weakness”, “big5”, “positive big5”, “entertainmentdna”.</p></div></div></div><div class="public anchor" id="var-get-trait-score-by-name"><h3>get-trait-score-by-name</h3><div class="usage"><code>(get-trait-score-by-name rep name)</code></div><div class="doc"><div class="markdown"><p>Get score and other trait info of the given characteristic name of the current user.</p></div></div></div><div class="public anchor" id="var-get-user-attribute-as-string"><h3>get-user-attribute-as-string</h3><div class="usage"><code>(get-user-attribute-as-string rep attr)</code></div><div class="doc"><div class="markdown"><p>Retrieve user attribute value (if exists) of the given <code>attr</code> and present as string. </p></div></div></div><div class="public anchor" id="var-personality-bar-chart"><h3>personality-bar-chart</h3><div class="usage"><code>(personality-bar-chart rep)</code></div><div class="doc"><div class="markdown"><p>Return the bar chart of the current user’s Big5 personality as a HTML string. Return nil if the user does not have sufficient amount of data</p></div></div></div><div class="public anchor" id="var-present-entertainment-dna"><h3>present-entertainment-dna</h3><div class="usage"><code>(present-entertainment-dna rep)</code></div><div class="doc"><div class="markdown"><p>Present the user’s entertainment-dna in a sentence.</p></div></div></div><div class="public anchor" id="var-store-unanswered-user-question"><h3>store-unanswered-user-question</h3><div class="usage"><code>(store-unanswered-user-question rep)</code><code>(store-unanswered-user-question rep unanswered-question)</code></div><div class="doc"><div class="markdown"><p>Store user question as unanswered question. Such questions will be available in results and analytics.</p>
<p>If <code>unanswered-question</code> is provided, it is stored. Otherwise, store the current user input.</p></div></div></div><div class="public anchor" id="var-store-user-attribute"><h3>store-user-attribute</h3><div class="usage"><code>(store-user-attribute rep attr value)</code><code>(store-user-attribute rep attr value value-type)</code></div><div class="doc"><div class="markdown"><p>Store the given user attribute with value.</p>
<p><code>attr</code> and <code>value-type</code> are strings. <code>value</code> can be a string, a integer or a boolean. If <code>value-type</code> is not provided, the type will be inferred from <code>value</code>.</p></div></div></div><div class="public anchor" id="var-store-user-faq"><h3>store-user-faq</h3><div class="usage"><code>(store-user-faq rep)</code><code>(store-user-faq rep faq)</code></div><div class="doc"><div class="markdown"><p>Store question asked by the user as faq. Such questions will be available in results and analytics.</p>
<p>If <code>faq</code> is provided, it is stored. Otherwise, store the current user input.</p></div></div></div><div class="public anchor" id="var-trait-score-value-by-name"><h3>trait-score-value-by-name</h3><div class="usage"><code>(trait-score-value-by-name rep trait-name)</code></div><div class="doc"><div class="markdown"><p>Given a trait name, return the user’s score value (if exists), which is an integer between 0 and 100, based on analysis on his/her historical chat input. Return nil if the user has not yet entered anything.</p></div></div></div><div class="public anchor" id="var-user-email"><h3>user-email</h3><div class="usage"><code>(user-email rep)</code></div><div class="doc"><div class="markdown"><p>Return email address of the user if known, otherwise return nil.</p></div></div></div><div class="public anchor" id="var-user-first-name"><h3>user-first-name</h3><div class="usage"><code>(user-first-name rep)</code></div><div class="doc"><div class="markdown"><p>Return the first name of the user, which the user entered to start the chat.</p></div></div></div><div class="public anchor" id="var-user-has-attribute.3F"><h3>user-has-attribute?</h3><div class="usage"><code>(user-has-attribute? rep attr)</code></div><div class="doc"><div class="markdown"><p>Check if the given attribute exists for the current user. </p></div></div></div><div class="public anchor" id="var-visitor-seem-familiar.3F"><h3>visitor-seem-familiar?</h3><div class="usage"><code>(visitor-seem-familiar? rep)</code></div><div class="doc"><div class="markdown"><p>Check if the name of the user has been seen by the REP in the same release.</p></div></div></div></div></body></html>