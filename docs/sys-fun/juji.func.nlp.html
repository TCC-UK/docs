<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>juji.func.nlp documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Juji Built-in Functions</span> <span class="project-version">1.2.20</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="juji.func.nlp.html"><div class="inner"><span>juji.func.nlp</span></div></a></li><li class="depth-1 "><a href="juji.func.system.html"><div class="inner"><span>juji.func.system</span></div></a></li><li class="depth-1 "><a href="juji.func.user.html"><div class="inner"><span>juji.func.user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="juji.func.nlp.html#var-complex-content.3F"><div class="inner"><span>complex-content?</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-contain-email"><div class="inner"><span>contain-email</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-contain-phone-number"><div class="inner"><span>contain-phone-number</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-contains-multiple-questions.3F"><div class="inner"><span>contains-multiple-questions?</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-contains-non-English.3F"><div class="inner"><span>contains-non-English?</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-extract-age"><div class="inner"><span>extract-age</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-extract-email"><div class="inner"><span>extract-email</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-extract-first-name"><div class="inner"><span>extract-first-name</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-extract-name"><div class="inner"><span>extract-name</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-extract-phone-number"><div class="inner"><span>extract-phone-number</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-informativeness"><div class="inner"><span>informativeness</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-is-gibberish"><div class="inner"><span>is-gibberish</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-is-name"><div class="inner"><span>is-name</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-is-similar-to-any"><div class="inner"><span>is-similar-to-any</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-max-similarity-score"><div class="inner"><span>max-similarity-score</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-non-trivial-noun-verb-extract-from-input"><div class="inner"><span>non-trivial-noun-verb-extract-from-input</span></div></a></li><li class="depth-1"><a href="juji.func.nlp.html#var-user-question.3F"><div class="inner"><span>user-question?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">juji.func.nlp</h1><div class="doc"><div class="markdown"><p>Built-in functions that do natural language processing on user input</p></div></div><div class="public anchor" id="var-complex-content.3F"><h3>complex-content?</h3><div class="usage"><code>(complex-content? rep input)</code></div><div class="doc"><div class="markdown"><p>Check if <code>input</code> contains more than <code>:complex-content-threshold</code> number of clauses as set in <a href="https://docs.juji.io/reference/#config">script config</a>.</p>
<p><code>input</code> is a vector of tokens. This function is usually used with <a href="https://docs.juji.io/reference/#captured-content">captured content</a> in REP rules.</p></div></div></div><div class="public anchor" id="var-contain-email"><h3>contain-email</h3><div class="usage"><code>(contain-email rep)</code></div><div class="doc"><div class="markdown"><p>Check if the current user input contains a valid email.</p>
<p><strong>Example</strong></p>
<pre><code>;; use this function with `extract-email` as in the following rule
;; the rule first check if user input contains an email,
;; if it does, REP responds with a customized acknowledgement.
[(contain-email)]
[(str "Thank you. we have your email as" (extract-email) ".")
 (record-answer ?q (input-text))]
</code></pre></div></div></div><div class="public anchor" id="var-contain-phone-number"><h3>contain-phone-number</h3><div class="usage"><code>(contain-phone-number rep)</code></div><div class="doc"><div class="markdown"><p>Check if the current user input contains a valid US phone number.</p>
<p><strong>Example</strong></p>
<pre><code>;; use this function with `extract-phone-number` as in the following rule
;; the rule first check if user input contains an phone number,
;; if it does, REP responds with a customized acknowledgement.
[(contain-phone-number)]
[(str "Thank you. we have your phone number as" (extract-phone-number) ".")
 (record-answer ?q (input-text))]
</code></pre></div></div></div><div class="public anchor" id="var-contains-multiple-questions.3F"><h3>contains-multiple-questions?</h3><div class="usage"><code>(contains-multiple-questions? rep input)</code></div><div class="doc"><div class="markdown"><p>Returns true iff the given <code>input</code> has more than one question.</p>
<p><code>input</code> needs to contain at least 2 sentences for this to be true.</p>
<p><code>input</code> is a vector of tokens. This function is usually used with <a href="https://docs.juji.io/reference/#captured-content">captured content</a> in REP rules.</p></div></div></div><div class="public anchor" id="var-contains-non-English.3F"><h3>contains-non-English?</h3><div class="usage"><code>(contains-non-English? rep input)</code></div><div class="doc"><div class="markdown"><p>Checks if there are non-English words in the given <code>input</code>.</p>
<p><code>input</code> is a vector of tokens. This function is usually used with <a href="https://docs.juji.io/reference/#captured-content">captured content</a> in REP rules.</p>
<p><strong>Example</strong></p>
<pre><code>;; The trigger below would fire if the words captured in ?something contains non-English
[I like to read (?something +) (contains-non-English? ?something)]
</code></pre></div></div></div><div class="public anchor" id="var-extract-age"><h3>extract-age</h3><div class="usage"><code>(extract-age rep)</code></div><div class="doc"><div class="markdown"><p>Extract age from the current user input.</p></div></div></div><div class="public anchor" id="var-extract-email"><h3>extract-email</h3><div class="usage"><code>(extract-email rep)</code></div><div class="doc"><div class="markdown"><p>Extract email from the current user input. Return nil if there’s no valid email found.</p></div></div></div><div class="public anchor" id="var-extract-first-name"><h3>extract-first-name</h3><div class="usage"><code>(extract-first-name rep)</code></div><div class="doc"><div class="markdown"><p>Extract the first name from the current user input. Assume the format “first middle last”.</p></div></div></div><div class="public anchor" id="var-extract-name"><h3>extract-name</h3><div class="usage"><code>(extract-name rep)</code></div><div class="doc"><div class="markdown"><p>Extract name from the current rep input.</p></div></div></div><div class="public anchor" id="var-extract-phone-number"><h3>extract-phone-number</h3><div class="usage"><code>(extract-phone-number rep)</code></div><div class="doc"><div class="markdown"><p>Extract phone number from the current user input. Return nil if there’s no valid US phone number found.</p></div></div></div><div class="public anchor" id="var-informativeness"><h3>informativeness</h3><div class="usage"><code>(informativeness rep input)</code></div><div class="doc"><div class="markdown"><p>Calculate informativeness of the given <code>input</code> in term of <a href="https://en.wikipedia.org/wiki/Information_content">surprisal</a></p>
<p><code>input</code> is a vector of tokens. This function is usually used with <a href="https://docs.juji.io/reference/#captured-content">captured content</a> in REP rules. </p></div></div></div><div class="public anchor" id="var-is-gibberish"><h3>is-gibberish</h3><div class="usage"><code>(is-gibberish rep)</code></div><div class="doc"><div class="markdown"><p>Check if the current user input is gibberish.</p></div></div></div><div class="public anchor" id="var-is-name"><h3>is-name</h3><div class="usage"><code>(is-name rep input)</code></div><div class="doc"><div class="markdown"><p>Check the given <code>input</code> is a name.</p>
<p><code>input</code> is a vector of tokens. This function is usually used with <a href="https://docs.juji.io/reference/#captured-content">captured content</a> in REP rules.</p>
<p><strong>Example</strong></p>
<pre><code>;; The trigger below would fire if the words captured in ?someone is a person's name
[I like to play with (?someone +) (is-name ?someone)]
</code></pre></div></div></div><div class="public anchor" id="var-is-similar-to-any"><h3>is-similar-to-any</h3><div class="usage"><code>(is-similar-to-any rep anchors)</code><code>(is-similar-to-any rep anchors threshold)</code></div><div class="doc"><div class="markdown"><p>Return true if the user input is similar to any of the <code>anchors</code>; return false otherwise.</p>
<p>This is a wrapper for thresholding <code>max-similarity-score</code>. If <code>threshold</code> is provided, the function returns true if <code>(max-similarity-score anchors)</code> is greater than the <code>threshold</code>; otherwise, 0.8 is used as <code>threshold</code>.</p></div></div></div><div class="public anchor" id="var-max-similarity-score"><h3>max-similarity-score</h3><div class="usage"><code>(max-similarity-score rep anchors)</code></div><div class="doc"><div class="markdown"><p>Calculate the sentence similarity of user input against the <code>anchors</code>, and return the highest similarity score. The function returns 0 if there’s an exception.</p>
<p><code>anchors</code> is a vector of sentence strings.</p>
<p><strong>Example</strong></p>
<pre><code>;; say user input is "My favorite is Diablo"
;; the following rule will trigger, because the max-similarity-score function returns 0.85
;; thus the inequality will return true
[(&gt; (max-similarity-score ["I like Diablo the most." "I usually play Diablo."]) 0.8)]
</code></pre></div></div></div><div class="public anchor" id="var-non-trivial-noun-verb-extract-from-input"><h3>non-trivial-noun-verb-extract-from-input</h3><div class="usage"><code>(non-trivial-noun-verb-extract-from-input rep)</code></div><div class="doc"><div class="markdown"><p>Extract non-trivial nouns and verbs from the current user input. Return a vector containing the extracted tokens.</p>
<p><strong>Example</strong></p>
<pre><code>;; say the current user input is "He likes to play basketball."
;; the following pattern stores `["likes" "play" "basketball"]` in variable `?extracted`
[(&lt;- ?extracted (non-trivial-noun-verb-extract))]
</code></pre></div></div></div><div class="public anchor" id="var-user-question.3F"><h3>user-question?</h3><div class="usage"><code>(user-question? rep)</code></div><div class="doc"><div class="markdown"><p>Check if current user input contains a question.</p></div></div></div></div></body></html>